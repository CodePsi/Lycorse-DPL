package com.document.xml.parser;

import com.document.processing.pattern.Pattern;
import org.junit.jupiter.api.Test;

class OdtXmlPatternAdjustProcessorTest {

    @Test
    void processXml() {
        String xmlContent = """
                <?xml version="1.0" encoding="UTF-8"?>
                <office:textDocument-content xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:style="urn:oasis:names:tc:opendocument:xmlns:style:1.0" xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0" xmlns:table="urn:oasis:names:tc:opendocument:xmlns:table:1.0" xmlns:draw="urn:oasis:names:tc:opendocument:xmlns:drawing:1.0" xmlns:fo="urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:number="urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0" xmlns:svg="urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0" xmlns:chart="urn:oasis:names:tc:opendocument:xmlns:chart:1.0" xmlns:dr3d="urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:form="urn:oasis:names:tc:opendocument:xmlns:form:1.0" xmlns:script="urn:oasis:names:tc:opendocument:xmlns:script:1.0" xmlns:ooo="http://openoffice.org/2004/office" xmlns:ooow="http://openoffice.org/2004/writer" xmlns:oooc="http://openoffice.org/2004/calc" xmlns:dom="http://www.w3.org/2001/xml-events" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rpt="http://openoffice.org/2005/report" xmlns:of="urn:oasis:names:tc:opendocument:xmlns:of:1.2" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:grddl="http://www.w3.org/2003/g/data-view#" xmlns:officeooo="http://openoffice.org/2009/office" xmlns:tableooo="http://openoffice.org/2009/table" xmlns:drawooo="http://openoffice.org/2010/draw" xmlns:calcext="urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0" xmlns:loext="urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0" xmlns:field="urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0" xmlns:formx="urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0" xmlns:css3t="http://www.w3.org/TR/css3-text/" office:version="1.2"><office:scripts/><office:font-face-decls><style:font-face style:name="Mangal1" svg:font-family="Mangal"/><style:font-face style:name="Liberation Serif" svg:font-family="&apos;Liberation Serif&apos;" style:font-family-generic="roman" style:font-pitch="variable"/><style:font-face style:name="Liberation Sans" svg:font-family="&apos;Liberation Sans&apos;" style:font-family-generic="swiss" style:font-pitch="variable"/><style:font-face style:name="Lucida Sans" svg:font-family="&apos;Lucida Sans&apos;" style:font-family-generic="system" style:font-pitch="variable"/><style:font-face style:name="Mangal" svg:font-family="Mangal" style:font-family-generic="system" style:font-pitch="variable"/><style:font-face style:name="Microsoft YaHei" svg:font-family="&apos;Microsoft YaHei&apos;" style:font-family-generic="system" style:font-pitch="variable"/><style:font-face style:name="NSimSun" svg:font-family="NSimSun" style:font-family-generic="system" style:font-pitch="variable"/></office:font-face-decls><office:automatic-styles><style:style style:name="P1" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="center" style:justify-single-word="false"/><style:text-properties officeooo:rsid="0001bd38" officeooo:paragraph-rsid="0001bd38"/></style:style><style:style style:name="P2" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="start" style:justify-single-word="false"/><style:text-properties fo:language="ru" fo:country="RU" officeooo:rsid="0002f981" officeooo:paragraph-rsid="0002f981"/></style:style><style:style style:name="P3" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="start" style:justify-single-word="false"/><style:text-properties fo:language="en" fo:country="US" officeooo:rsid="0002f981" officeooo:paragraph-rsid="0002f981"/></style:style><style:style style:name="P4" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="start" style:justify-single-word="false"/><style:text-properties officeooo:rsid="00048524" officeooo:paragraph-rsid="00048524"/></style:style><style:style style:name="P5" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="start" style:justify-single-word="false" fo:break-before="page"/><style:text-properties officeooo:rsid="0001bd38" officeooo:paragraph-rsid="0002f981"/></style:style><style:style style:name="P6" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="start" style:justify-single-word="false"/><style:text-properties officeooo:rsid="00048524" officeooo:paragraph-rsid="00048524"/></style:style><style:style style:name="P7" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="start" style:justify-single-word="false"/><style:text-properties fo:font-style="normal" fo:font-weight="normal" officeooo:rsid="00048524" officeooo:paragraph-rsid="00048524" style:font-style-asian="normal" style:font-weight-asian="normal" style:font-style-complex="normal" style:font-weight-complex="normal"/></style:style><style:style style:name="P8" style:family="paragraph" style:parent-style-name="Standard"><style:paragraph-properties fo:text-align="start" style:justify-single-word="false"/><style:text-properties fo:font-style="normal" fo:font-weight="normal" officeooo:rsid="00048524" officeooo:paragraph-rsid="0011aaa0" style:font-style-asian="normal" style:font-weight-asian="normal" style:font-style-complex="normal" style:font-weight-complex="normal"/></style:style><style:style style:name="T1" style:family="text"><style:text-properties officeooo:rsid="0001bd38"/></style:style><style:style style:name="T2" style:family="text"><style:text-properties fo:language="en" fo:country="US"/></style:style><style:style style:name="T3" style:family="text"><style:text-properties fo:language="en" fo:country="US" officeooo:rsid="0001bd38"/></style:style><style:style style:name="T4" style:family="text"><style:text-properties fo:language="ru" fo:country="RU" fo:font-style="italic" fo:font-weight="normal" officeooo:rsid="000d6d02" style:font-style-asian="italic" style:font-weight-asian="normal" style:font-style-complex="italic" style:font-weight-complex="normal"/></style:style><style:style style:name="T5" style:family="text"><style:text-properties fo:language="ru" fo:country="RU" fo:font-style="normal" fo:font-weight="normal" officeooo:rsid="000d6d02" style:font-style-asian="normal" style:font-weight-asian="normal" style:font-style-complex="normal" style:font-weight-complex="normal"/></style:style><style:style style:name="T6" style:family="text"><style:text-properties fo:font-style="italic" fo:font-weight="bold" style:font-style-asian="italic" style:font-weight-asian="bold" style:font-style-complex="italic" style:font-weight-complex="bold"/></style:style><style:style style:name="T7" style:family="text"><style:text-properties fo:font-style="italic" fo:font-weight="bold" officeooo:rsid="000d6d02" style:font-style-asian="italic" style:font-weight-asian="bold" style:font-style-complex="italic" style:font-weight-complex="bold"/></style:style><style:style style:name="T8" style:family="text"><style:text-properties fo:font-style="italic" style:font-style-asian="italic" style:font-style-complex="italic"/></style:style><style:style style:name="T9" style:family="text"><style:text-properties style:text-line-through-style="none" style:text-line-through-type="none" fo:font-style="italic" style:text-underline-style="solid" style:text-underline-width="auto" style:text-underline-color="font-color" fo:font-weight="normal" style:font-style-asian="italic" style:font-weight-asian="normal" style:font-style-complex="italic" style:font-weight-complex="normal"/></style:style><style:style style:name="T10" style:family="text"><style:text-properties style:text-line-through-style="none" style:text-line-through-type="none" fo:font-style="italic" style:text-underline-style="solid" style:text-underline-width="auto" style:text-underline-color="font-color" fo:font-weight="normal" officeooo:rsid="000d6d02" style:font-style-asian="italic" style:font-weight-asian="normal" style:font-style-complex="italic" style:font-weight-complex="normal"/></style:style><style:style style:name="T11" style:family="text"><style:text-properties style:text-line-through-style="none" style:text-line-through-type="none" fo:font-style="italic" style:text-underline-style="solid" style:text-underline-width="auto" style:text-underline-color="font-color" style:font-style-asian="italic" style:font-style-complex="italic"/></style:style><style:style style:name="T12" style:family="text"><style:text-properties fo:font-style="normal" fo:font-weight="normal" style:font-style-asian="normal" style:font-weight-asian="normal" style:font-style-complex="normal" style:font-weight-complex="normal"/></style:style><style:style style:name="T13" style:family="text"><style:text-properties officeooo:rsid="0011aaa0"/></style:style></office:automatic-styles><office:body><office:text text:use-soft-page-breaks="true"><office:forms form:automatic-focus="false" form:apply-design-mode="false"/><text:sequence-decls><text:sequence-decl text:display-outline-level="0" text:name="Illustration"/><text:sequence-decl text:display-outline-level="0" text:name="Table"/><text:sequence-decl text:display-outline-level="0" text:name="Text"/><text:sequence-decl text:display-outline-level="0" text:name="Drawing"/><text:sequence-decl text:display-outline-level="0" text:name="Figure"/></text:sequence-decls><text:p text:style-name="P1">Test</text:p><text:p text:style-name="P1">Some more text</text:p><text:p text:style-name="P1"/><text:p text:style-name="P4">The project is ${project}</text:p><text:p text:style-name="P4"><text:span text:style-name="T11">${project</text:span><text:span text:style-name="T10">1</text:span><text:span text:style-name="T9">}</text:span><text:span text:style-name="T12"> </text:span><text:span text:style-name="T5">фывжлд</text:span><text:span text:style-name="T4"> – </text:span><text:span text:style-name="T6">${project</text:span><text:span text:style-name="T7">2</text:span><text:span text:style-name="T6">}</text:span></text:p><text:p text:style-name="P7"/><text:p text:style-name="P8">${project<text:span text:style-name="T13">3</text:span>}${project<text:span text:style-name="T13">5</text:span>}</text:p><text:p text:style-name="P8">${project<text:span text:style-name="T13">4</text:span>}</text:p><text:p text:style-name="P5">{Pattern2}{Pattern2}</text:p><text:p text:style-name="P5">{Pattern2}</text:p><text:p text:style-name="P5"/><text:p text:style-name="P5">{Pattern2}</text:p><text:p text:style-name="P5">{Pattern2}{Pattern2}{Pattern2}{Pattern2}{Pattern2}</text:p><text:p text:style-name="P2">аывф ывафы в</text:p><text:p text:style-name="P2">а <text:span text:style-name="T2">sdfsd</text:span> <text:span text:style-name="T3">{Pattern2}</text:span> <text:span text:style-name="T2">dfsd</text:span>фыв </text:p><text:p text:style-name="P3">афыsdf sdf sdfsd <text:span text:style-name="T1">{Pattern2}</text:span> fвафцуацуацукцу </text:p></office:text></office:body></office:textDocument-content>
                """;
        DocumentXmlPatternAdjustProcessor odtXmlPatternAdjustProcessor = new DocumentXmlPatternAdjustProcessor(xmlContent, new Pattern("${", "}"));
        odtXmlPatternAdjustProcessor.processXml();

    }
}